name: Read YAML

on:
  push:
    branches: [ "main" ]
  workflow_dispatch:

jobs:
  read_yaml:
    runs-on: ubuntu-latest
    outputs:
      data: ${{ steps.parser.outputs.data }}
    steps:
      - uses: actions/checkout@v3
      - name: Parse YAML
        id: parser
        shell: python
        run: |
          import yaml

          with open('config_test.yml', 'r') as f:
            config_file = yaml.safe_load(f)

          value = config_file.get('version', '')
          print(f"data=${value} >> $GITHUB_OUTPUT")

  validate:
    needs: read_yaml
    runs-on: ubuntu-latest
    steps:
      - name: Check
        run: echo ${{ needs.read_yaml.outputs.data }} 
          


